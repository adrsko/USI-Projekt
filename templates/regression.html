{% extends "layout.html" %}
{% block content %}

<div class = "content-section">
    <form method = "POST" action="">
        {{ form.hidden_tag() }}
        <div class="form-group" onclick="send_data()">
            {{ form.submit(class="btn btn-outline-info") }}
        </div>
    </form>
    <br>
    <div class="col-12" style="text-align: center;">
        <h3><span id="prediction"></span>
        </h3>
    </div>

</div>

<script>
    function form_handler(event)
    {
        event.preventDefault();
    }

    function send_data()
    {
        document.querySelector('form').addEventListener('submit', form_handler);
        var fd = new FormData(document.querySelector('form'));
        var xhr = new XMLHttpRequest();
        xhr.open('POST', '/test_r', true)
        document.getElementById("prediction").innerHTML="Zaczekaj, trwa obliczanie regresji...";
        xhr.onreadystatechange = function()
        {
            if(xhr.readyState = XMLHttpRequest.DONE)
            {
                document.getElementById("prediction").innerHTML="Regresja obliczona, można szacować cenę samochodu" + xhr.responseText;
            }
        }
        xhr.send(fd);
    }
</script>

{% endblock content %}